{% extends "siteapp/base.html" %}

{% block title %}Track Order{% endblock %}

{% block content %}
<h1>Track Your Order</h1>

<div class="card">
    <form method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="order_id">Order ID</label>
            <input id="order_id" type="number" name="order_id" value="{{ request.POST.order_id|default:'' }}">
        </div>

        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input id="phone" type="text" name="phone" value="{{ request.POST.phone|default:'' }}">
        </div>

        <div class="actions">
            <button type="submit" class="btn-primary">Track</button>
        </div>
    </form>
</div>

{% if order %}
    <div class="card order-card">
        <h2>Order #{{ order.id }}</h2>
        <p><strong>Name:</strong> {{ order.customer_name }}</p>
        <p><strong>Phone:</strong> {{ order.phone }}</p>
        <p><strong>Total:</strong> ₹{{ order.total }}</p>
        <p><strong>Status:</strong> {{ order.get_status_display }}</p>
        <p><strong>Placed on:</strong> {{ order.created_at }}</p>

        <h3>Items</h3>
        <ul class="order-items">{% for item in order.items.all %}<li>{{ item.variant.product.title }} – {{ item.variant.color }} / {{ item.variant.get_blouse_option_display }} – Qty: {{ item.quantity }} – Price: ₹{{ item.price }}</li>{% endfor %}</ul>
    </div>
{% endif %}
{% endblock %}
